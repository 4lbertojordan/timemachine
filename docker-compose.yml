services:
  timemachine:
    image: jord4ncodes/timemachine:latest
    container_name: timemachine
    restart: always
    env_file:
      - .env.timemachine
    cap_add:
      - NET_ADMIN
    environment:
      - TZ=Europe/Madrid
      - AVAHI_HOSTNAME=timemachine
    volumes:
      - ./timemachine/smb_timemachine.conf:/etc/samba/smb.conf:ro
      - ./timemachine/logs/log_tm:/var/log/samba
      - ./timemachine:/timemachine
    deploy:
      resources:
        limits:
          memory: 1024M
